<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edvion - مخطّط التعلّم بالذكاء الاصطناعي</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', 'Cairo', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      width: 100%;
      max-width: 800px;
      background: white;
      border-radius: 20px;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }

    header {
      background: linear-gradient(135deg, #6e8efb, #a777e3);
      color: white;
      padding: 25px;
      text-align: center;
      position: relative;
    }

    header h1 {
      font-size: 2.2rem;
      margin-bottom: 10px;
    }

    header p {
      opacity: 0.9;
      font-size: 1.1rem;
    }

    .ai-badge {
      position: absolute;
      top: 15px;
      left: 15px;
      background: rgba(255, 255, 255, 0.2);
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .content {
      padding: 30px;
    }

    .question-box {
      margin-bottom: 25px;
      animation: fadeIn 0.5s ease-in-out;
    }

    h2 {
      color: #764ba2;
      margin-bottom: 20px;
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }

    .option {
      background: #f8f9ff;
      padding: 18px 15px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      border: 2px solid #e6e9ff;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .option i {
      font-size: 1.8rem;
      color: #667eea;
    }

    .option:hover {
      background: #667eea;
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }

    .option:hover i {
      color: white;
    }

    .option input {
      display: none;
    }

    .option.selected {
      background: #764ba2;
      color: white;
      border-color: #764ba2;
    }

    .option.selected i {
      color: white;
    }

    .buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    button {
      background: #764ba2;
      color: white;
      padding: 14px 28px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    button:hover {
      background: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }

    button:disabled {
      background: #cccccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .progress-container {
      margin: 30px 0;
    }

    .progress-bar {
      height: 12px;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
    }

    .progress {
      height: 100%;
      background: linear-gradient(to right, #667eea, #764ba2);
      border-radius: 10px;
      transition: width 0.5s ease;
      width: 25%;
    }

    .progress-text {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      color: #666;
    }

    .result-box {
      background: #f8f9ff;
      padding: 25px;
      border-radius: 15px;
      margin-top: 20px;
      border: 2px solid #e6e9ff;
      display: none;
    }

    .result-content {
      line-height: 1.8;
    }

    .result-content h3 {
      color: #764ba2;
      margin: 15px 0 10px;
    }

    .result-content ul {
      list-style-type: none;
      padding: 0;
    }

    .result-content li {
      margin-bottom: 10px;
      padding-right: 15px;
      position: relative;
    }

    .result-content li:before {
      content: "•";
      color: #667eea;
      font-weight: bold;
      position: absolute;
      right: 0;
    }

    .api-status {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px;
      background: #f0f4ff;
      border-radius: 10px;
      margin-top: 20px;
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #4caf50;
    }

    .thinking-animation {
      display: none;
      text-align: center;
      padding: 20px;
    }

    .thinking-animation i {
      font-size: 2.5rem;
      color: #764ba2;
      margin-bottom: 15px;
    }

    .dots {
      display: flex;
      justify-content: center;
      gap: 5px;
    }

    .dot {
      width: 10px;
      height: 10px;
      background: #667eea;
      border-radius: 50%;
      animation: bounce 1.5s infinite;
    }

    .dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    .error-box {
      background: #ffebee;
      color: #c62828;
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
      display: none;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 600px) {
      .options {
        grid-template-columns: 1fr;
      }
      
      header h1 {
        font-size: 1.8rem;
      }
      
      h2 {
        font-size: 1.4rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="ai-badge">
        <i class="fas fa-robot"></i>
        <span>Powered by AI</span>
      </div>
      <h1>Edvion - مخطّط التعلّم بالذكاء الاصطناعي</h1>
      <p>اختر إجاباتك وسيقوم الذكاء الاصطناعي بإنشاء خطة تعلم مخصصة لك</p>
    </header>

    <div class="content">
      <div class="question-box">
        <h2><i class="fas fa-laptop-code"></i> ماذا تريد أن تتعلم؟</h2>
        <div class="options">
          <label class="option">
            <input type="radio" name="topic" value="HTML">
            <i class="fab fa-html5"></i>
            <span>HTML</span>
          </label>
          <label class="option">
            <input type="radio" name="topic" value="CSS">
            <i class="fab fa-css3-alt"></i>
            <span>CSS</span>
          </label>
          <label class="option">
            <input type="radio" name="topic" value="JavaScript">
            <i class="fab fa-js-square"></i>
            <span>JavaScript</span>
          </label>
          <label class="option">
            <input type="radio" name="topic" value="Python">
            <i class="fab fa-python"></i>
            <span>Python</span>
          </label>
        </div>

        <h2><i class="fas fa-signal"></i> ما هو مستواك الحالي؟</h2>
        <div class="options">
          <label class="option">
            <input type="radio" name="level" value="مبتدئ">
            <i class="fas fa-seedling"></i>
            <span>مبتدئ</span>
          </label>
          <label class="option">
            <input type="radio" name="level" value="متوسط">
            <i class="fas fa-rocket"></i>
            <span>متوسط</span>
          </label>
          <label class="option">
            <input type="radio" name="level" value="متقدم">
            <i class="fas fa-crown"></i>
            <span>متقدم</span>
          </label>
        </div>

        <h2><i class="fas fa-book-open"></i> تفضل التعلم كيف؟</h2>
        <div class="options">
          <label class="option">
            <input type="radio" name="style" value="نظري">
            <i class="fas fa-book"></i>
            <span>نظري</span>
          </label>
          <label class="option">
            <input type="radio" name="style" value="عملي">
            <i class="fas fa-code"></i>
            <span>عملي</span>
          </label>
          <label class="option">
            <input type="radio" name="style" value="فيديوهات">
            <i class="fas fa-video"></i>
            <span>فيديوهات</span>
          </label>
          <label class="option">
            <input type="radio" name="style" value="مقالات">
            <i class="fas fa-newspaper"></i>
            <span>مقالات</span>
          </label>
        </div>

        <h2><i class="fas fa-clock"></i> كم ساعة تستطيع أن تتعلم أسبوعياً؟</h2>
        <div class="options">
          <label class="option">
            <input type="radio" name="time" value="1-3">
            <i class="fas fa-hourglass-start"></i>
            <span>1-3 ساعات</span>
          </label>
          <label class="option">
            <input type="radio" name="time" value="4-6">
            <i class="fas fa-hourglass-half"></i>
            <span>4-6 ساعات</span>
          </label>
          <label class="option">
            <input type="radio" name="time" value="7-10">
            <i class="fas fa-hourglass-end"></i>
            <span>7-10 ساعات</span>
          </label>
          <label class="option">
            <input type="radio" name="time" value="10+">
            <i class="fas fa-hourglass"></i>
            <span>10+ ساعة</span>
          </label>
        </div>

        <div class="progress-container">
          <div class="progress-bar">
            <div class="progress" id="progress-bar"></div>
          </div>
          <div class="progress-text">
            <span>0% مكتمل</span>
            <span id="progress-percent">25%</span>
          </div>
        </div>

        <div class="buttons">
          <button id="reset-btn" disabled>
            <i class="fas fa-redo"></i>
            إعادة تعيين
          </button>
          <button id="generate-btn" disabled>
            <i class="fas fa-robot"></i>
            إنشاء الخطة بالذكاء الاصطناعي
          </button>
        </div>
      </div>

      <div class="thinking-animation" id="thinking">
        <i class="fas fa-brain"></i>
        <h3>جاري إنشاء خطتك التعليمية باستخدام الذكاء الاصطناعي</h3>
        <p>قد تستغرق هذه العملية بضع ثوانٍ</p>
        <div class="dots">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>

      <div class="result-box" id="result">
        <h2><i class="fas fa-graduation-cap"></i> خطتك التعليمية المخصصة</h2>
        <div class="result-content" id="plan-content">
          <!-- سيتم ملء المحتوى هنا بواسطة الذكاء الاصطناعي -->
        </div>
      </div>

      <div class="error-box" id="error-message">
        <i class="fas fa-exclamation-circle"></i>
        <span id="error-text"></span>
      </div>

      <div class="api-status">
        <div class="status-indicator"></div>
        <span>اتصال Hugging Face API نشط وجاهز للعمل</span>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const options = document.querySelectorAll('.option');
      const generateBtn = document.getElementById('generate-btn');
      const resetBtn = document.getElementById('reset-btn');
      const progressBar = document.getElementById('progress-bar');
      const progressPercent = document.getElementById('progress-percent');
      const thinkingAnimation = document.getElementById('thinking');
      const resultBox = document.getElementById('result');
      const planContent = document.getElementById('plan-content');
      const errorBox = document.getElementById('error-message');
      const errorText = document.getElementById('error-text');
      
      // مفتاح Hugging Face API
      const HF_API_KEY = "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";
      
      let selectedCount = 0;
      const totalQuestions = 4;
      
      // إضافة تأثير عند اختيار خيار
      options.forEach(option => {
        option.addEventListener('click', function() {
          const input = this.querySelector('input');
          const name = input.getAttribute('name');
          
          // إلغاء اختيار أي خيار آخر في نفس المجموعة
          document.querySelectorAll(`input[name="${name}"]`).forEach(inp => {
            inp.parentElement.classList.remove('selected');
          });
          
          // تحديد الخيار الحالي
          input.checked = true;
          this.classList.add('selected');
          
          // تحديث التقدم
          updateProgress();
        });
      });
      
      // تحديث شريط التقدم
      function updateProgress() {
        const selectedOptions = document.querySelectorAll('input:checked');
        selectedCount = selectedOptions.length;
        const progress = (selectedCount / totalQuestions) * 100;
        
        progressBar.style.width = `${progress}%`;
        progressPercent.textContent = `${progress}%`;
        
        // تمكين أو تعطيل الأزرار
        generateBtn.disabled = selectedCount !== totalQuestions;
        resetBtn.disabled = selectedCount === 0;
      }
      
      // إعادة تعيين النموذج
      resetBtn.addEventListener('click', function() {
        document.querySelectorAll('input:checked').forEach(input => {
          input.checked = false;
          input.parentElement.classList.remove('selected');
        });
        
        selectedCount = 0;
        updateProgress();
        resultBox.style.display = 'none';
        thinkingAnimation.style.display = 'none';
        errorBox.style.display = 'none';
      });
      
      // إنشاء الخطة باستخدام Hugging Face API
      generateBtn.addEventListener('click', function() {
        thinkingAnimation.style.display = 'block';
        resultBox.style.display = 'none';
        errorBox.style.display = 'none';
        
        // جمع الإجابات
        const answers = {
          topic: document.querySelector('input[name="topic"]:checked').value,
          level: document.querySelector('input[name="level"]:checked').value,
          style: document.querySelector('input[name="style"]:checked').value,
          time: document.querySelector('input[name="time"]:checked').value
        };
        
        // إنشاء الخطة باستخدام Hugging Face API
        generatePlanWithHFAPI(answers);
      });
      
      // الاتصال بـ Hugging Face API لإنشاء الخطة
      async function generatePlanWithHFAPI(answers) {
        try {
          // نص prompt المخصص للذكاء الاصطناعي
          const prompt = `
            المستخدم يريد خطة تعلم:
            - الموضوع: ${answers.topic}
            - المستوى: ${answers.level}
            - الطريقة المفضلة: ${answers.style}
            - الوقت المتاح أسبوعياً: ${answers.time} ساعة
            
            أنشئ له خطة تعليمية منظمة مع مصادر مناسبة.
            ركز على إنشاء خطة عملية قابلة للتنفيذ مع جدول زمني مقترح.
            قدم نصائح محددة للمستخدم حسب مستواه وطريقة التعلم المفضلة لديه.
          `;
          
          // الاتصال بـ Hugging Face API
          const response = await fetch(
            "https://api-inference.huggingface.co/models/gpt2",
            {
              headers: { Authorization: `Bearer ${HF_API_KEY}` },
              method: "POST",
              body: JSON.stringify({ 
                inputs: prompt,
                parameters: {
                  max_length: 1000,
                  temperature: 0.7,
                  do_sample: true
                }
              }),
            }
          );
          
          if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
          }
          
          const data = await response.json();
          
          // عرض الخطة التي أنشأها الذكاء الاصطناعي
          displayGeneratedPlan(data[0].generated_text);
          
        } catch (error) {
          console.error('Error generating plan:', error);
          thinkingAnimation.style.display = 'none';
          
          // عرض رسالة الخطأ
          errorText.textContent = `عذراً، حدث خطأ أثناء إنشاء الخطة: ${error.message}`;
          errorBox.style.display = 'flex';
        }
      }
      
      // عرض الخطة التي أنشأها الذكاء الاصطناعي
      function displayGeneratedPlan(generatedText) {
        thinkingAnimation.style.display = 'none';
        
        // تنظيف النص وعرضه بشكل منظم
        const cleanText = generatedText
          .replace(prompt, '') // إزالة الـ prompt من النتيجة
          .replace(/(?:\r\n|\r|\n)/g, '<br>') // تحويل الأسطر إلى <br>
          .replace(/\d+\./g, '<br><strong>$&</strong>'); // تنسيق النقاط المرقمة
        
        planContent.innerHTML = `
          <div class="ai-generated-plan">
            <h3>خطة تعلم ${answers.topic} للمستوى ${answers.level}</h3>
            <p>${cleanText}</p>
            <div class="ai-note">
              <p><i class="fas fa-info-circle"></i> تم إنشاء هذه الخطة باستخدام نموذج الذكاء الاصطناعي GPT-2 من Hugging Face</p>
            </div>
          </div>
        `;
        
        resultBox.style.display = 'block';
        
        // التمرير إلى النتائج
        resultBox.scrollIntoView({ behavior: 'smooth' });
      }
    });
  </script>
</body>
</html>
